<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Tetris</title>
    <style>
    	* { padding: 0; margin: 0; }
    	canvas { background: #eee; display: block; margin: 0 auto; }
    </style>

<script src="paperjs/dist/paper-full.js"></script>
<script type="text/javascript">
    function getJSONP(url, success) {

    var ud = '_' + +new Date,
        script = document.createElement('script'),
        head = document.getElementsByTagName('head')[0] 
               || document.documentElement;

    window[ud] = function(data) {
        head.removeChild(script);
        success && success(data);
    };

    script.src = url.replace('callback=?', 'callback=' + ud);
    head.appendChild(script);

}

getJSONP('/config', function(data){
    console.log(data);
}); 
    
</script>
</head>
<body>

<canvas id="myCanvas" resize></canvas>

<script type="text/paperscript" canvas="myCanvas">
var piece=drawPiece(40,40);




var angle=1;
setInterval(r,10);
function r(){piece.rotate(angle)}

function drawBlock(x,y){

	var colorMain="#FF0000";
	var colorLight="#FFAA00";
	var colorDark="#CC0000";
	var sizeSquare = 20;
	var sizeLight = 2; 	
	
	var point = new Point(x, y);
	var size = new Size(sizeSquare, sizeSquare);
	var path = new Path.Rectangle(point, size);
	path.fillColor = colorMain; 

	var point = new Point(x, y);
	var size = new Size(sizeLight, sizeSquare);
	var path2 = new Path.Rectangle(point, size);
	path2.fillColor = colorLight;

	var point = new Point(x+sizeSquare-sizeLight, y);
	var size = new Size(sizeLight,sizeSquare);
	var path4 = new Path.Rectangle(point, size);
	path4.fillColor = colorDark;

	var point = new Point(x, y);
	var size = new Size(sizeSquare,sizeLight);
	var path3 = new Path.Rectangle(point, size);
	path3.fillColor = colorLight;

	var point = new Point(x, y+sizeSquare-sizeLight);
	var size = new Size(sizeSquare,sizeLight);
	var path5 = new Path.Rectangle(point, size);
	path5.fillColor = colorDark;

	var block = new Group({
	    children: [path, path2, path3, path4, path5] 
	});
	return block;
}

function drawPiece(x,y){
	var b1=drawBlock(20,20);
	var b2=drawBlock(40,20);
	var b3=drawBlock(60,20);
	var b4=drawBlock(40,40);

	var piece=new Group({
		children:[b1,b2,b3,b4]
	});
	return piece;
}
</script>
</body>
</html>
